# 動作空間設計文檔

## 概述

本文檔說明 Agent 的動作空間設計。分為兩部分：
1. **當前實作**：目前已經實現的動作空間
2. **未來規劃**：多技能系統完成後的目標動作空間

---

# 當前實作（Current Implementation）

## 動作空間總覽

### 離散動作（7 個選項）

| ID | 動作 | 說明 |
|----|------|------|
| 0 | MOVE_FORWARD | 向前移動 |
| 1 | MOVE_BACKWARD | 向後移動 |
| 2 | TURN_LEFT | 左轉 |
| 3 | TURN_RIGHT | 右轉 |
| 4 | OUTER_SLASH | 外圈刮 |
| 5 | MISSILE | 飛彈 |
| 6 | HAMMER | 鐵錘 |

### 連續 Actor（1 個）

| ID | Actor 名稱 | 輸出範圍 | 說明 |
|----|-----------|---------|------|
| 0 | aim_offset | 連續值 | 施法時的瞄準偏移（僅 飛彈 時使用）|

### 特徵維度

當前使用 **27 維**特徵向量，詳見 `長期規劃-特徵工程.md`。

---

## 程式碼架構




---

# 未來規劃（Planned Future State）

## 動作空間目標

### 離散動作（11 個選項）

| ID | 動作 | 說明 |
|----|------|------|
| 0 | MOVE_FORWARD | 向前移動 |
| 1 | MOVE_BACKWARD | 向後移動 |
| 2 | TURN_LEFT | 左轉 |
| 3 | TURN_RIGHT | 右轉 |
| 4 | SKILL_OUTER_SLASH | 外圈刮 |
| 5 | SKILL_MISSILE | 飛彈 |
| 6 | SKILL_HAMMER | 鐵錘 |
| 7 | SKILL_DASH | 閃現 |
| 8 | SKILL_SOUL_CLAW | 靈魂爪 |
| 9 | SKILL_SOUL_PALM | 靈魂掌 |
| 10 | SKILL_BLOOD_POOL | 血池 |
| 11 | SKILL_SUMMON_PACK | 召喚血包 |

### 連續 Actor（6 個）

| ID | Actor 名稱 | 對應技能 | 輸出範圍 | 說明 |
|----|-----------|---------|---------|------|
| 0 | aim_missile | 飛彈 | [-π, π] | 發射角度偏移 |
| 1 | aim_hammer | 鐵錘 | [-π, π] | 錘擊角度偏移 |
| 2 | aim_dash_direction | 閃現 | [-π, π] | 閃現方向 |
| 3 | aim_dash_facing | 閃現 | [-π, π] | 閃現後朝向 |
| 4 | aim_claw | 靈魂爪 | [-π, π] | 爪擊角度偏移 |
| 5 | aim_palm | 靈魂掌 | [-π, π] | 掌擊角度偏移 |

### 技能與 Actor 的映射

```python
SKILL_TO_ACTORS = {
    4: [],           # 外圈刮 - 無需瞄準
    5: [0],          # 飛彈 - aim_missile
    6: [1],          # 鐵錘 - aim_hammer
    7: [2, 3],       # 閃現 - aim_dash_direction, aim_dash_facing
    8: [4],          # 靈魂爪 - aim_claw
    9: [5],          # 靈魂掌 - aim_palm
    10: [],           # 血池 - 無需瞄準
    11: [],          # 召喚血包 - 無需瞄準
}
```

---



---

## 實作路線圖

| 階段 | 內容 | 狀態 |
|------|------|------|
| 1 | 7 離散動作 + 2 連續 Actor | ✅ 已完成 |
| 2 | Player 類別重構（SkillConfig） | ✅ 已完成 |
| 3 | 多技能系統（8 技能 + CD） | ⏳ 待實作 |
| 4 | 11 離散動作 + 6 連續 Actor | ⏳ 待實作 |
| 5 | 技能可用性遮罩 | ⏳ 待實作 |
